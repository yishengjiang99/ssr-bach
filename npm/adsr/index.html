<body>
	<script>
		// const w = new Worker("index.js", { type: "module" });
		// w.onmessage = ({ data: { egval } }) => document.write(egval.join(","));
		var real = new Float32Array([0, 1]);
		var imag = new Float32Array([0, 0]);

		for (let i = 55; i < 100; i++) {
			var ac = new OfflineAudioContext(1, 48000, 48000);
			var osc = ac.createOscillator();

			var wave = ac.createPeriodicWave(real, imag, { disableNormalization: true });

			osc.setPeriodicWave(wave);
			const analyser = ac.createAnalyser();
			// Float32Array should be the same length as the frequencyBinCount
			const myDataArray = new Float32Array(analyser.frequencyBinCount);
			// fill the Float32Array with data returned from getFloatFrequencyData()
			osc.connect(analyser).connect(ac.destination);

			osc.start();
			osc.stop(2);

			ac.startRendering();
			ac.oncomplete = () => {
				analyser.getFloatFrequencyData(myDataArray);
				var filename = i + "fft.pcm";
				var blob = new Blob([myDataArray], { type: "text/plain" });
				var link = document.createElement("a");
				link.download = filename;
				link.innerHTML = i + "fft <br>";
				link.href = window.URL.createObjectURL(blob);
				document.body.appendChild(link);
				//	document.write(myDataArray.join("\n"));
			};
		}
	</script>
</body>
